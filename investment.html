<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Планировщик регулярных доходов</title>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <style>
        .timeline-row {
            height: 40px;
        }
        .timeline-row td:nth-child(n+3) {
            position: relative;
            padding: 0 !important;
        }
        .timeline-month   :where(th:nth-child(n+3), td:nth-child(n+3)),
        .monthly-sum      :where(th:nth-child(n+3), td:nth-child(n+3)) {
            min-width:      80px;
            text-align:     center;
            padding:        0.25rem !important;
        }
        .timeline-month   :where(th:nth-child(n+3), td:nth-child(n+3)) {
            font-size: 0.9rem;
        }
        .monthly-sum      :where(th:nth-child(n+3), td:nth-child(n+3)) {
            font-size: 0.8rem;
        }
        .timeline-month th:nth-child(4),
        .monthly-sum th:nth-child(4),
        .timeline-row td:nth-child(4) {
            background-color: var(--bs-primary-bg-subtle) !important;
        }
        .timeline-year :where(th:nth-child(n+2), td:nth-child(n+2)) {
            min-width: 80px;
            text-align: center;
            padding: 0.25rem !important;
            font-size: 0.9rem;
        }

        .income-bar {
            position: absolute;
            height: 60%;
            top: 20%;
            left: 0;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: var(--bs-body-color);
            border: 1px solid rgba(0,0,0,0.1);
            padding: 0 0.1rem;
        }
        .income-bar.green {
            background-color: var(--bs-success-bg-subtle);
        }
        .income-bar.yellow {
            background-color: var(--bs-warning-bg-subtle);
        }
        .income-bar.red {
            background-color: var(--bs-danger-bg-subtle);
        }
        .income-bar.gray {
            background-color: var(--bs-secondary-bg-subtle);
        }

        .timeline-table {
            table-layout: fixed;
            min-width: 100%;
        }
        .timeline-table :where(th, td):nth-child(-n+2) {
            overflow: hidden;
            text-overflow: ellipsis;
            word-wrap: break-word;
        }
        .timeline-table :where(th, td):first-child {
            width: 30%;
            white-space: normal;
        }
        .timeline-table :where(th, td):nth-child(2) {
            width: 15%;
            white-space: nowrap;
        }

        .source-desc {
            display: block;
            font-size: 0.8rem;
            color: var(--bs-secondary-color);
        }

        @media (max-width: 768px) {
        }
    </style>
</head>
<body class="container-fluid my-4"> <!-- container-fluid для full-width -->
<!-- Summary блок -->
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">Сводка</h5>
        <div class="row">
            <div class="col-md-4"><strong>Текущий доход:</strong> 110к руб.</div>
            <div class="col-md-4"><strong>Прогноз через 3 мес:</strong> 95к руб.</div>
            <div class="col-md-4"><strong>Проблемные источники: </strong>Аренда квартиры</div>
        </div>
    </div>
</div>

<div class="table-responsive">
    <table class="timeline-table table table-bordered">
        <thead>
        <tr class="timeline-month">
            <th>Источник</th>
            <th>Общая сумма</th>
            <th>Дек</th>
            <th>Янв</th>
            <th>Фев</th>
            <th>Мар</th>
            <th>Апр</th>
            <th>Май</th>
            <th>Июн</th>
        </tr>
        <tr class="timeline-year">
            <th colspan="2">Год</th>
            <th>2025</th>
            <th colspan="6">2026</th>
        </tr>
        <tr class="monthly-sum">
            <th>Сумма по месяцам</th> <!-- Перенесли в первую колонку -->
            <th></th> <!-- Вторая пустая -->
            <th>150к</th>
            <th>125к</th>
            <th>140к</th>
            <th>140к</th>
            <th>90к</th>
            <th>100к</th>
            <th>90к</th>
        </tr>
        </thead>
        <tbody>
        <!-- Источник 1: Зарплата (постоянная, зелёный) -->
        <tr class="timeline-row">
            <td>Зарплата<br><span class="source-desc">С 01.01.2025 (бесконечно)</span></td>
            <td>630к руб.</td> <!-- Общая сумма за весь период -->
            <td><div class="income-bar green">90к</div></td>
            <td><div class="income-bar green">90к</div></td>
            <td><div class="income-bar green">90к</div></td>
            <td><div class="income-bar green">90к</div></td>
            <td><div class="income-bar green">90к</div></td>
            <td><div class="income-bar green">90к</div></td>
            <td><div class="income-bar green">90к</div></td>
        </tr>
        <!-- Источник 2: Аренда (проблемная, красный) -->
        <tr class="timeline-row">
            <td>Аренда квартиры<br><span class="source-desc">С 01.06.2025 по 31.12.2025</span></td>
            <td>30к руб.</td>
            <td><div class="income-bar red" style="left: 0; width: 100%;">30к</div></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <!-- Источник 3: Депозит (начинается 20 янв, 4 мес, total 60k, distributed; цвета по статусу) -->
        <tr class="timeline-row">
            <td>Депозит в банке<br><span class="source-desc">С 20.01.2026 по 20.05.2026</span></td>
            <td>60к руб.</td>
            <td></td>
            <td><div class="income-bar green" style="left: 61%; width: 39%;">5к</div></td> <!-- Начинается, >1 мес до конца: зелёный -->
            <td><div class="income-bar green">14к</div></td>
            <td><div class="income-bar green">15к</div></td>
            <td><div class="income-bar yellow">15к</div></td> <!-- Заканчивается <1 мес (в мае): жёлтый для апреля? Wait, status per bar -->
            <td><div class="income-bar yellow" style="width: 66%;">10к</div></td> <!-- Заканчивается в этом месяце: жёлтый -->
            <td></td>
        </tr>
        <!-- Источник 4: Инвестиции в акции (заканчивается в марте, без распределения; цвета по статусу, убрали красный в последнем если не нужно) -->
        <tr class="timeline-row">
            <td>Инвестиции в акции<br><span class="source-desc">С 01.11.2025 по 31.03.2026</span></td>
            <td>70к руб.</td>
            <td><div class="income-bar green">20к</div></td>
            <td><div class="income-bar green">20к</div></td>
            <td><div class="income-bar green">20к</div></td>
            <td><div class="income-bar yellow">10к</div></td> <!-- Полный месяц, но заканчивается в марте: если <1 мес до конца, жёлтый -->
            <td></td>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>
</div>

<script src="/js/color-modes.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
</body>
</html>